- name: dry-run-vep
  tags:
    - dry-run
    - vep
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/samples.csv
      --configfile=tests/data/config.json
      --snakefile vep.smk
  exit_code: 0
  stdout:
    contains:
      - vep
      - SRR8615409/vep.txt.gz
      - SRR8615409/vep.target.txt.gz
      - SRR8615409/vep.target.tsv

- name: dry-run-vanilla
  tags:
    - dry-run
  command: >
    snakemake
      --dryrun
      --reason
      --printshellcmds
      --config pepfile=tests/pep/samples.csv
      --configfile=tests/data/config.json
      --snakefile Snakefile
  exit_code: 0
  stdout:
    contains:
      - vardict-java
      - vardict/SRR8615409.vep.target.tsv
      - "rule vardict_annotate:"
      - "rule vardict_filter_vep:"
      - "rule vardict_vep_table:"

      - "rule varscan_annotate:"
      - "rule varscan_filter_vep:"
      - "rule varscan_vep_table:"
    contains_regex:
      - "filter_vep.py .* vardict/SRR8615409.vep.txt"
      - "filter_vep.py .* varscan/SRR8615409.vep.txt"
